−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−
	　HSP USB-IO用プラグイン　Ver 0.30

＜制　　作＞　K-K
＜開発環境＞　VC++ 2005
＜動作確認＞　Thinkpad X60 + Windows XP
＜転　　載＞　可
−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−

１．このDLLについて
	モルフィー企画さん(http://www.morphyplanning.co.jp/ )で販売されていた
	USB-IOをHSPから使うためのプラグインです．

	今までUSB-IOを販売していたモルフィー企画が無くなってしまったため，
	安価なUSB-IOがありませでしたが，
	同じものがテクノキットさん(http://www.technokit.biz/ )から中学校向けの
	教材として販売されています．

	Km2Netさん(http://km2net.com/ )のUSB-IOにも対応しました(03.12.08)．


	複数のUSB-IOを扱えるようにしたつもりですが，あまり検証していません．
	動作しない場合はご連絡ください．

２．インストール＆実行
	HSPのフォルダにhspusbio.dllをコピーしてください．
	作成したexeを実行するときは，exeと同じディレクトリに置いてください．

３．使用方法
	スクリプトの先頭でhspusbio.asをインクルードしてください．
	uio_findでUSB-IOを検索・初期化して，その後に
	uio_inp/outで読み書きしてください．
	uio_seldevで複数のUSB-IOを切り替えて使うことが出来ます．
	(uio_findを実行しなくても初めてuio_inp/outを実行するときには自動的に
	uio_findが呼ばれます．ただし，最初だけなのでUSB-IOが一度外されて，
	もう一度挿された場合などは正常に動作しないので明示的にuio_findを
	呼んでください)

	HSP3.0の場合はモジュールとして実装した mod_usbio.as があるので，
	インクルードすれば，DLL無しで使用できます．

命令の説明
・uio_find
	ディバイスの中からUSB-IOを検索・初期化します．
	失敗するとstatにエラーコードが帰ります．
	・エラーコード
	0:正常
	1:必要なドライバが無い(まだUSB-IOを繋いだことが無い場合など)
	2:USB-IOが繋がってない

・uio_free
	USB-IOを解放します．
	HSPの終了時に自動的に呼び出されますが，手動で呼び出しても
	害はありません．

・uio_out p1,p2 (,p3)
	p1…出力するI/Oポートアドレス(0〜1)
	p2…出力する内容(8ビット)
	p3…モード
	失敗するとstatに1が帰ります
	p3に1を指定すると，ポート1のp1にパルスを送りポート0を書き換えます．

・uio_inp p1,p2 (,p3)
	8ビット読み込み
	p1…データを読み込む変数
	p2…I/Oポートアドレス(0〜1)
	p3…モード
	失敗するとstatに0以外の値が帰ります．
	p3に1を指定すると，ポート1のp1にパルスを送りポート0から読み込みます．

・uio_getdevs
	繋がれているUSB-IOの数がstatに帰ります．

・uio_seldev p1
	p1…番号(0〜uio_getdevsで得た値)
	複数のUSB-IOが繋がれている場合に何番目を使うかを指定します．

４．アンインストール
	下記のファイルを削除して下さい．

５．ファイルについて
	hspusbio.dll	（本体）
	hspusbio.txt	（今読んでるファイル）
	hspusbio.as	（インクルード用ヘッダ）
	usbiotest.as	(サンプルスクリプト)
	mod_usbio.as	(HSP3用モジュール)

６．著作権について
	著作権はＫ−Ｋにあります．
	また，このプログラムによって生じた，いかなる損害についても
	保証しません．自己の責任の範囲で使用してください．
	使用に関しては特に制限はありません．商用・非商用に限らず，
	自由に使ってください．
	作ったソフトと同時に配布する場合も制限はありません．
	転載や雑誌掲載を希望される場合，連絡をくれるとうれしいです．
	できれば，常に最新版を置くようにしてください．

７．変更点
	Ver 0.1(02.09.24)
	・とりあえず，必要そうな機能を
	Ver 0.1c(02.09.26)
	・説明を修正
	・16〜23のコマンドもとりあえず使えるように
	・細かい修正
	・DLLのサイズを大幅に削減
	Ver 0.1d(03.08.18)
	・テクノキットのUSB-IOに対応
	Ver 0.1e(03.12.08)
	・Km2NetさんのUSB-IOに対応
	2004-10-24 Ver 0.1f
	・WindowsXPで入力がおかしいのを修正
	2004-10-31 Ver 0.2
	・IOのデータが確実に読めるように修正
	・読み取り速度の改善
	2005-06-22 Ver 0.21
	・uio_findを繰り返すと，何重にもディバイスを開くのを修正
	・uio_findでuio_seldevの設定をリセットするように
	2007-05-14 Ver 0.30
	・開発環境をVC++ 2005 Express Editionに変更
	・Windows Vistaで動作しない問題を解消
	・HSP3用モジュール(mod_usbio.as)を追加
	・使っていないUSB-IOは閉じるように

８．その他
	お好みによって，DLLの拡張子をHPIに変えてもOKです．

	このプログラムの最新版はホームページにあります．
	K-K(川平 航介) kawa0701@binzume.net
	HomePage http://www.binzume.net/
−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−
